//package com.revshop.dao;
//
//
//
//import java.sql.*;
//import com.revshop.model.*;
//import com.revshop.util.*;
//
//public class UserDAO {
//
//    public boolean registerUser(User user) {
//        try {
//            Connection con = DBConnection.getConnection();
//            String sql =
//                "INSERT INTO users VALUES (user_seq.NEXTVAL,?,?,?,?,?,?,?)";
//            PreparedStatement ps = con.prepareStatement(sql);
//
//            ps.setString(1, user.getName());
//            ps.setString(2, user.getEmail());
//            ps.setString(3, user.getPassword());
//            ps.setString(4, user.getRole());
//            ps.setString(5, user.getBusinessName());
//            ps.setString(6, user.getQuestion());
//            ps.setString(7, user.getAnswer());
//
//            return ps.executeUpdate() > 0;
//
//        } catch (Exception e) {
//            e.printStackTrace();
//        }
//        return false;
//    }
//
//    public User login(String email, String password) {
//        User user = null;
//        try {
//            Connection con = DBConnection.getConnection();
//            String sql =
//                "SELECT * FROM users WHERE email=? AND password=?";
//            PreparedStatement ps = con.prepareStatement(sql);
//            ps.setString(1, email);
//            ps.setString(2, password);
//
//            ResultSet rs = ps.executeQuery();
//            if (rs.next()) {
//                user = new User();
//                user.setUserId(rs.getInt("user_id"));
//                user.setName(rs.getString("name"));
//                user.setRole(rs.getString("role"));
//            }
//        } catch (Exception e) {
//            e.printStackTrace();
//        }
//        return user;
//    }
//
//    public boolean forgotPassword(
//            String email, String answer, String newPassword) {
//
//        try {
//            Connection con = DBConnection.getConnection();
//            String sql =
//                "UPDATE users SET password=? WHERE email=? AND answer=?";
//            PreparedStatement ps = con.prepareStatement(sql);
//            ps.setString(1, newPassword);
//            ps.setString(2, email);
//            ps.setString(3, answer);
//
//            return ps.executeUpdate() > 0;
//
//        } catch (Exception e) {
//            e.printStackTrace();
//        }
//        return false;
//    }
//}





//package com.revshop.dao;
//
//import com.revshop.model.User;
//import java.util.ArrayList;
//import java.util.List;
//
//public class UserDAO {
//
//    private static List<User> users = new ArrayList<User>();
//    private static int userId = 0;
//
//    public boolean register(User user) {
//        for (User u : users) {
//            if (u.getEmail().equals(user.getEmail()))
//                return false;
//        }
//        users.add(user);
//        return true;
//    }
//
//    public User login(String email, String password, String role) {
//        for (User u : users) {
//            if (u.getEmail().equals(email) &&
//                u.getPassword().equals(password) &&
//                u.getRole().equals(role)) {
//                return u;
//            }
//        }
//        return null;
//    }
//
//    public int getNextId() {
//        return ++userId;
//    }
//}







package com.revshop.dao;

import java.util.ArrayList;
import java.util.List;
import com.revshop.model.User;

public class UserDAO {

    private static List<User> users = new ArrayList<User>();
    private static int id = 0;

    public boolean register(User user) {
        for (User u : users) {
            if (u.getEmail().equalsIgnoreCase(user.getEmail()))
                return false;
        }
        user.setId(++id);
        users.add(user);
        return true;
    }

    public User login(String email, String password) {
        for (User u : users) {
            if (u.getEmail().equalsIgnoreCase(email)
                && u.getPassword().equals(password))
                return u;
        }
        return null;
    }

    public boolean forgotPassword(String email,
                                  String question,
                                  String answer,
                                  String newPwd) {
        for (User u : users) {
            if (u.getEmail().equalsIgnoreCase(email)
                && u.getQuestion().equals(question)
                && u.getAnswer().equals(answer)) {
                u.setPassword(newPwd);
                return true;
            }
        }
        return false;
    }
}
